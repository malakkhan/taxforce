/* ===== SIMULATE PAGE - SLIDER RESET BUTTON LAYOUT ===== */
/* Targeted via hidden .slider-compact-marker div */
/* STRICT SELECTOR: Target only the LEAF row containing the marker */

[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker) {
    flex-wrap: nowrap !important;
    gap: 0px !important;
    align-items: center !important;
    /* Changed from flex-start to center to match working text inputs */
    overflow: visible !important;
}

/* Force individual columns to behave as fixed-size vs flexible blocks */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker)>div {
    flex: 0 0 auto !important;
    width: auto !important;
}

/* 1. Slider Column - Takes remaining space */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker)>div:nth-child(1) {
    flex: 1 1 auto !important;
    width: auto !important;
    min-width: 150px !important;
    padding-right: 0px !important;
    /* Reduced to bring input closer */
}

/* 2. Number Input Column - Fixed width matching text inputs */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker)>div:nth-child(2) {
    width: 90px !important;
    /* Matches text inputs */
    min-width: 90px !important;
    padding-left: 0px !important;
    /* Reduced to bring input closer */
}

[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker) [data-testid="stNumberInput"] {
    width: 80px !important;
    /* Matches text inputs (input is 80px inside 90px col) */
}

[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker) [data-testid="stNumberInput"] input {
    width: 100% !important;
    min-width: unset !important;
}

/* 3. Reset Button Column - Tightly next to input */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker)>div:last-child {
    width: 45px !important;
    /* Matches text inputs */
    min-width: 45px !important;
    padding-left: 14px !important;
    /* Matches text inputs */
    display: flex !important;
    align-items: center !important;
    /* Match text inputs */
}

/* Remove internal vertical block padding in the reset column */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker)>div:last-child [data-testid="stVerticalBlock"] {
    gap: 0 !important;
    padding: 0 !important;
}

/* Reset button styling - Transparent & Compact (Exact duplicate of text input button style) */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker) button {
    background: transparent !important;
    border: none !important;
    color: #A0AEC0 !important;
    font-size: 16px !important;
    padding: 0px !important;
    height: 30px !important;
    width: 30px !important;
    cursor: pointer !important;
}

[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker) button:hover {
    color: #01689B !important;
    transform: rotate(90deg) !important;
}



/* Zero out markdown padding for slider compact view */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.slider-compact-marker) .stMarkdown p {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1.2 !important;
}

/* ===== COMPACT TEXT INPUT ROWS ===== */
/* Targeted via hidden .compact-marker div */
/* CRITICAL FIX: Only target the LEAF horizontal block (one that has no other horizontal blocks inside) */
/* This prevents the :has() selector from matching the top-level page layout and breaking the header */

[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker) {
    flex-wrap: nowrap !important;
    justify-content: flex-start !important;
    gap: 0px !important;
    align-items: center !important;
    overflow: visible !important;
}

/* Force individual columns to behave as fixed-size blocks clustered left */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker)>div {
    flex: 0 0 auto !important;
    width: auto !important;
}

/* 1. Label Column - Flexible width to fill available space */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker)>div:nth-child(1) {
    flex: 1 1 auto !important;
    width: auto !important;
    min-width: 60px !important;
    display: flex !important;
    align-items: center !important;
}

/* Allow label wrapping for responsiveness */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker) label,
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker) .stMarkdown p {
    white-space: normal !important;
    line-height: 1.2 !important;
}

/* 2. Number Input Column - Tightly follow label */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker)>div:nth-child(2) {
    padding-left: 12px !important;
    /* Fixed visual gap */
    width: 90px !important;
}

[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker) [data-testid="stNumberInput"] {
    width: 80px !important;
}

/* 3. Reset Button Column - Directly next to input */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker)>div:last-child {
    padding-left: 8px !important;
    /* Tight gap */
    width: 45px !important;
    display: flex !important;
    align-items: center !important;
}

/* Reset button styling */
[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker) button {
    background: transparent !important;
    border: none !important;
    color: #A0AEC0 !important;
    font-size: 16px !important;
    padding: 0px !important;
    height: 30px !important;
    width: 30px !important;
    cursor: pointer !important;
}

[data-testid="stHorizontalBlock"]:not(:has([data-testid="stHorizontalBlock"])):has(.compact-marker) button:hover {
    color: #01689B !important;
    transform: rotate(90deg) !important;
}

/* ===== WHITESPACE FIXES ===== */
/* 1. HIDE MARKER to remove the 16px flex-gap it causes */
.slider-compact-marker {
    display: none !important;
}

/* 2. REMOVE PADDING on the specific container wrapper for these sliders */
/* 2. REMOVE PADDING on the specific container wrapper for these sliders */
[data-testid="stVerticalBlockBorderWrapper"]:has(.slider-compact-marker)>div {
    padding: 12px 24px !important;
    /* Reduce top/bottom padding from 24px to 12px */
}

/* 3. PULL SLIDER UP towards the title (Counteract the 16px flex-gap) */
[data-testid="stHorizontalBlock"]:has(.slider-compact-marker) {
    margin-top: -12px !important;
}

/* 4. REMOVE SLIDER PADDING for these specific compact sliders */
[data-testid="stHorizontalBlock"]:has(.slider-compact-marker) .stSlider {
    padding-top: 0px !important;
    padding-bottom: 0px !important;
}

/* 5. TIGHTEN ROWS of Compact Inputs */
/* The "massive" whitespace is due to nested stVerticalBlocks having 1rem gap + 24px padding each */

/* CSS Rule Reverted */

/* 5. TIGHTEN ROWS - STRICT PRECISE TARGETING */
/* Target ONLY the specific vertical block containing our compact text box wrapper */
/* Target ONLY the specific container we created in simulate.py */
/* We use nesting (> child) to ensure we don't accidentally target parent containers (like expanders or main page) */
[data-testid="stVerticalBlock"]:has(> [data-testid="stElementContainer"] .compact-rows-wrapper) {
    /* Relax gap from 0px to 50px (User Request) */
    gap: 50px !important;
    /* Explicitly remove any border/background artifacts */
    border: 0px solid transparent !important;
    box-shadow: none !important;
    background-color: transparent !important;
    /* FIX MASSIVE GAP: Pull container up slightly */
    padding-top: 0px !important;
    margin-top: -32px !important;
}

/* Ensure the marker itself doesn't take space */
.compact-rows-wrapper {
    display: none !important;
}

/* Ensure no border wrapper shows up */
[data-testid="stVerticalBlockBorderWrapper"]:has(.compact-rows-wrapper) {
    border: none !important;
    box-shadow: none !important;
}

/* Reduce padding of the INNER widget columns slightly */
[data-testid="stVerticalBlock"]:has(> [data-testid="stElementContainer"] .compact-rows-wrapper) [data-testid="stVerticalBlock"] {
    padding-top: 2px !important;
    padding-bottom: 2px !important;
    gap: 0px !important;
}

/* FIX ALIGNMENT: Remove default paragraph margin from labels */
[data-testid="stVerticalBlock"]:has(> [data-testid="stElementContainer"] .compact-rows-wrapper) .stMarkdown p {
    margin-bottom: 0px !important;
    line-height: 1.2 !important;
}

/* FIX ALIGNMENT: Remove negative margin from collapsed-label inputs AND push down using TOP */
[data-testid="stVerticalBlock"]:has(> [data-testid="stElementContainer"] .compact-rows-wrapper) [data-testid="stNumberInput"] {
    margin-bottom: 0px !important;
    /* Use relative positioning to force the move: 2px down */
    position: relative !important;
    top: 2px !important;
}